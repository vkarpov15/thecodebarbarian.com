<html><head><script type="text/javascript">var _sf_startpt=(new Date()).getTime()
</script><title>Shippable: An Alternative Take on Travis | www.thecodebarbarian.com</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600" rel="stylesheet" type="text/css"/><link href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,600,700" rel="stylesheet" type="text/css"/><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/><link href="/style/style.css" rel="stylesheet" type="text/css"/><link href="/style/github.css" rel="stylesheet" type="text/css"/><script href="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script><script href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script href="/javascript/sidebar.js" type="text/javascript"></script><meta property="og:title" content="Shippable: An Alternative Take on Travis"/><meta property="og:url" content="http://www.thecodebarbarian.com/2015/04/10/shippable-an-alternative-take-on-travis"/><meta property="og:image" content="//i.imgur.com/sotdDGi.png"/><meta property="og:site_name" content="The Code Barbarian"/></head><body><div class="navbar social-links hidden-sm hidden-xs"><div class="container"><ul class="nav navbar-nav navbar-right"><li><a href="http://www.twitter.com/code_barbarian">twitter</a></li><li><a href="http://www.github.com/vkarpov15">github</a></li><li><a href="http://thecodebarbarian.com/feed.xml">rss</a></li><li><a href="/recommendations">recommendations</a></li></ul></div></div><div class="navbar" id="nav"><div class="container"><div class="navbar-header"><a class="navbar-brand big-brand" href="http://thecodebarbarian.com"><img class="logo" src="/images/Barbarian_Head.png"/><span class="site-name">The Code Barbarian</span></a></div><div class="navbar-right collapse navbar-collapse" id="home-nav-mobile"><ul class="nav navbar-nav"><li><a href="/tag/mongodb.html">MongoDB</a></li><li><a href="/tag/nodejs.html">NodeJS</a></li><li><a href="/tag/asyncawait.html">Async/Await</a></li><li><a href="/tag/vue.html">Vue</a></li><li class="hidden-md hidden-lg"><a href="#">@code_barbarian</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Github</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Facebook</a></li></ul></div></div></div><div class="container-fluid"><div class="col-lg-3 col-lg-offset-9 right-bar" id="desktop-right-bar"><div class="right-bar-content-slider pull-right"><div class="row recent-posts right-bar-group"><div class="col-lg-12 articles"><p class="right-bar-label">Most Popular Articles</p><ul class="list-unstyled"><li class="right-bar-li"><a href="/common-async-await-design-patterns-in-node.js.html">Common Async/Await Design Patterns in Node.js</a></li><li class="right-bar-li"><a href="/unhandled-promise-rejections-in-node.js.html">Unhandled Promise Rejections in Node.js</a></li><li class="right-bar-li"><a href="/using-async-await-with-mocha-express-and-mongoose">Using Async/Await with Mocha, Express, and Mongoose</a></li><li class="right-bar-li"><a href="/write-your-own-node-js-promise-library-from-scratch.html">Write Your Own Node.js Promise Library from Scratch</a></li><li class="right-bar-li"><a href="/80-20-guide-to-express-error-handling">The 80/20 Guide to Express Error Handling</a></li></ul></div></div><div class="row recent-posts right-bar-group"><div class="col-lg-12 books"><p class="right-bar-label">Ebooks<div><a href="http://asyncawait.net/?utm_source=thecodebarbarian&amp;utm_campaign=sidebar"><img src="/images/verticalbanner.png"/></a></div><div><a href="http://es2015generators.com"><img src="https://i.imgur.com/xvGNKlr.png"/><p><i>The 80/20 Guide to ES2015 Generators</i></p></a></div><div><script type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&amp;serve=C6AILKT&amp;placement=thecodebarbariancom" id="_carbonads_js"></script></div></p></div></div></div></div></div><div class="container-fluid hidden-sm hidden-md hidden-lg" id="mobile-sharing-options"><div class="row"><div class="col-lg-12"><style>#home-nav-mobile {
  float: left !important;
  margin-left: 215px !important;
}
</style><div class="post-sharing-options"><div class="row"><div class="col-xs-3 twitter-share sharing-option"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter"></i></a></div><div class="col-xs-3 facebook-share sharing-option"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook"></i></a></div><div class="col-xs-3 google-share sharing-option"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus"></i></a></div><div class="col-xs-3 comment sharing-option"><a class="social" href="#disqus_thread"><i class="fa fa-comment"></i></a></div></div></div></div></div></div><div class="post-sharing-options hidden-xs pull-left" id="desktop-sharing-options"><ul class="list-unstyled"><li class="twitter-share"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter sharing-option"></i></a></li><li class="facebook-share"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook sharing-option"></i></a></li><li class="google-share"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus sharing-option"></i></a></li></ul></div><div class="container"><div class="col-lg-9 post-text"><div class="row"><div class="title-byline-container"><h1 class="post-title">Shippable: An Alternative Take on Travis</h1><div class="credits"><span class="byline">by Valeri Karpov</span><span class="byhandle"><a href="http://www.twitter.com/code_barbarian">@code_barbarian</a></span><span class="bydate">April 10, 2015</span></div></div></div><script type="text/javascript" src="/js/native.js"></script><div><script>
  _native.init("CK7DT53N",{
    targetClass: 'native-inline'
  });
</script>

<div class="native-inline">
  <a href="#native_link#"><span class="sponsor">Sponsor</span> #native_company# - #native_desc#</a>
</div>
</div><div class="post-body-text-container"><p>I&#39;ve <a href="/2015/02/13/travis_coveralls">spent a fair amount of time lauding Travis</a> as an excellent go-to CI tool. But, when I wanted to use Travis
for a private repo, I balked at the minimum $129/mo price
tag. Add onto that <a href="https://coveralls.io/pricing">the cost of using Coveralls Pro</a> and I realized that using
Travis and Coveralls for private repos is not financially
feasible. Even if I had millions in funding to burn, it would be
cheaper in the long run to bite the bullet and set up my
own hosted CI using <a href="https://github.com/Strider-CD/strider">Strider</a>
or some other open-source CI server.</p>
<p>Thankfully, before I got around to setting up my own,
I stumbled across a company called
<a href="http://www.shippable.com/">Shippable</a> when they
<a href="https://github.com/Automattic/mongoose/issues/2423">commented on a mongoose GitHub issue</a>. Shippable positions
itself as a
Docker-ized hosted CI. But, if you don&#39;t ignore the buzzword 
bingo, you&#39;ll miss four of its key advantages over Travis:</p>
<ul>
<li><a href="http://www.shippable.com/pricing.html">Free for private repos</a></li>
<li><a href="http://www.shippable.com/pricing.html">$12/year for using your own dedicated hardware</a></li>
<li>Actual test reports (Xunit) rather than just console output</li>
<li><a href="http://www.shippable.com/features.html">Test coverage reporting built-in rather than through Coveralls</a></li>
</ul>
<h1 id="setting-up-shippable">Setting Up Shippable</h1>
<p>Shippable has a <a href="http://docs.shippable.com/en/latest/start.html">NodeJS startup guide</a>
and <a href="https://github.com/shippableSamples/sample_node">sample repo</a>.
For the benefit of Travis users, I set up a
<a href="https://github.com/vkarpov15/fizzbuzz-coverage-shippable">simple fizzbuzz repo that&#39;s integrated with Shippable</a> that&#39;s
analagous to my <a href="/2015/02/13/travis_coveralls">fizzbuzz example for Travis</a>.</p>
<p>A Shippable config file, <code>shippable.yml</code>, looks an awful lot like
a <code>.travis.yml</code> file. As a matter of fact, you can run Shippable
with your existing <code>.travis.yml</code> file (unless you use io.js) -
Shippable will look for a <code>.travis.yml</code> if it can&#39;t find a
<code>shippable.yml</code>. Here&#39;s the <code>shippable.yml</code> for the
<code>fizzbuzz-coverage-shippable</code> repo:</p>
<pre><code># language setting
language: node_js

node_js:
  - 0.10.33
  - 0.12.2

# Create directories for test and coverage reports
before_script:
  - npm install
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - npm run-script test-shippable

after_script:
  - npm run-script test-coverage
  - npm run-script shippable-cobertura</code></pre><p>There are two key differences from Travis above:</p>
<ul>
<li>It looks like you need to run <code>npm install</code> in your <code>before_script</code>. Maybe I&#39;m doing something wrong, but Shippable didn&#39;t automatically do that for me.</li>
<li>The <code>after_script</code> runs test coverage using the <code>test-coverage</code>
script and then converts the coverage output to
<a href="https://github.com/gotwarlost/istanbul/issues/17">cobertura format</a>,
which is the format Shippable prefers for code coverage output.</li>
</ul>
<p>The <code>package.json</code> is identical to the
Travis-based <code>fizzbuzz-coverage</code> repo, except for the fact that
the <code>coveralls</code> module is no longer necessary for code coverage,
and the slightly modified scripts:</p>
<pre><code>  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"shippable-cobertura"</span>: <span class="hljs-string">"istanbul report cobertura --dir shippable/codecoverage/"</span>,
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"mocha ./test/*"</span>,
    <span class="hljs-string">"test-shippable"</span>: <span class="hljs-string">"mkdir -p shippable/testresults &amp;&amp; mocha --reporter xunit ./test/* &gt; shippable/testresults/result.xml"</span>,
    <span class="hljs-string">"test-coverage"</span>: <span class="hljs-string">"istanbul cover ./node_modules/mocha/bin/_mocha -- -R spec ./test/*"</span>
  }</code></pre><ul>
<li>The <code>shippable-cobertura</code> script converts the output from
<code>test-coverage</code> into <a href="https://github.com/gotwarlost/istanbul/issues/17">cobertura format</a> for Shippable&#39;s built-in
test coverage reporting.</li>
<li>The <code>test-shippable</code> script runs tests and outputs the results
using mocha&#39;s
<a href="https://github.com/mochajs/mocha/issues/10">xunit reporter</a>,
because Shippable provides better test reporting (rather than simply console output) if you provide it Xunit-compatible output.</li>
<li>The <code>test-coverage</code> script is just your standard code coverage
script with istanbul.</li>
</ul>
<h1 id="conclusion">Conclusion</h1>
<p>Shippable looks pretty awesome. I look forward to trying it out
on my private repos - it has all the features I love in Travis
(<a href="https://github.com/vkarpov15/fizzbuzz-coverage-shippable/pull/1">pull request support</a>, etc.),
a couple extra useful features, and free as in beer. My
experience so far is overall positive, although it does look
like it takes its time running tests on pull requests. If you&#39;re
looking for a hosted CI tool for private repos, Shippable seems
like a good choice.</p>
</div><div style="color: #666666; border-top: 1px dashed #666666; margin: 25px; text-align: center; padding-top: 10px"><em>Found a typo or error? Open up a pull request! This post is
available as markdown on&nbsp;<a href="https://github.com/vkarpov15/thecodebarbarian.com/blob/master/lib/posts/#{post.src.substr('./lib/posts/'.length)}">Github</a></em></div><div id="disqus_thread"></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'codebarbarian'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></div></div><div style="padding-bottom: 100px">&nbsp;</div><script type="text/javascript">var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://g0a3nbw0xa.execute-api.us-east-1.amazonaws.com/prod/track', true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onreadystatechange = function() {};
xhr.send(JSON.stringify({
  path: window.location.pathname,
  hostname: window.location.hostname
}));</script><link rel="stylesheet" href="/style/inlinecpc.css"/></body></html>